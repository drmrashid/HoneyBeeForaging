using System;
using System.Collections.Generic;
using System.Text;

namespace HoneyBeeForaging
{
    class Foxholes2D : FitnessFunction
    {
        public Foxholes2D(int d, double successThld)
            : base(d, successThld)
        {
            for (int i = 0; i < dimensions; i++)
            {
                searchSpace[i, 0] = -65.535;
                searchSpace[i, 1] = 65.535;
            }
            InitializePeaks(Foxholes2DPeaks);
            ngh = Math.Abs(searchSpace[0, 0] - searchSpace[0, 1]) * 0.05;
            peakError = new double[peaks.GetUpperBound(0) + 1];
            peakFitnessEvaluations = new int[peaks.GetUpperBound(0) + 1];
        }
        static int[][] a = new int[][] {
		    new int[] {
			    -32, -16, 0, 16, 32, -32, -16, 0, 16, 32, -32, -16, 0, 16, 32, -32, -16, 0, 16, 32, -32, -16, 0, 16, 32
		    },
		    new int[] {
			    -32, -32, -32, -32, -32, -16, -16, -16, -16, -16, 0,0,0,0,0,16, 16, 16, 16, 16, 32, 32, 32, 32, 32
			}
	    };
        static double[,] Foxholes2DPeaks = {
            {0.0000000000000000e+000,-32,-32},//0.000000000000000,
            {9.9800374817920301e-001,-16,-32},//0.998003748179203,
            {1.9920308918556302e+000,0,-32},//1.992030891855630,
            {2.9821051755564372e+000,16,-32},//2.982105175556440,
            {3.9682515178799638e+000,32,-32},//3.968251517879960,
            {4.9504890353274629e+000,-32,-16},//4.950489035327460,
            {5.9288409480854822e+000,-16,-16},//5.928840948085480,
            {6.9033355544661399e+000,0,-16},//6.903335554466140,
            {7.8739931589007890e+000,16,-16},//7.873993158900790,
            {8.8408452332665419e+000,32,-16},//8.840845233266540,
            {9.8038977406325660e+000,-32,0},//9.803897740632710,
            {1.0763166845595503e+001,-16,0},//10.76316684559570,
            {1.1718699111327830e+001,0,0},//11.71869911132780,
            {1.2670506337947222e+001,16,0},//12.67050633794750,
            {1.3618631019840199e+001,32,0},//13.61863101983990,
            {1.4563054603155166e+001,-32,16},//14.56305460315520,
            {1.5503788388519395e+001,-16,16},//15.50378838851940,
            {1.6440906523213787e+001,0,16},//16.44090652321380,
            {1.7374407383662039e+001,16,16},//17.37440738366200,
            {1.8304349079053360e+001,32,16},//18.30434907905340,
            {1.9230711071136295e+001,-32,32},//19.23071107113630,
            {2.0153450793058777e+001,-16,32},//20.15345079305880,
            {2.1072686575830041e+001,0,32},//21.07268657583000,
            {2.1988408561127070e+001,16,32},//21.98840856112710,
            {2.2900680742886649e+001,32,32}//22.90068074288660	
        };
        public override double Evaluate(Bee b)
        {
            double f = 0;
            double sum = 0;

            for (int i = 0; i < 25; i++)
            {
                sum = 0;
                for (int d = 0; d < 2; d++)
                {
                    sum = sum + Math.Pow(b.Position[d] - a[d][i], 6);
                }
                //f = f + 1 / ( j + 1 + sum1 );
                f = f + 1 / (i + sum);
            }
            f = 1 / (0.002 + f);
            return f;
        }
        public override double Evaluate(double[] b)
        {
            throw new Exception("The method or operation is not implemented.");
        }
    }
}
